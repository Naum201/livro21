{% extends "base_logged.html" %}

{% block content %}
    <div class="container" style="display: flex; gap: 30px;">
        <div class="left-column" style="flex: 1; text-align: center;">
            <img src="{{ url_for('static', filename='uploads/capas/' + obra.capa) }}" alt="Capa da Obra" class="img-fluid rounded shadow-sm">
        </div>

        <div class="right-column" style="flex: 2;">
            <h1>{{ obra.titulo }}</h1>
            <p><strong>Gênero:</strong> {{ obra.genero.nome }}</p>
            <p><strong>Sinopse:</strong> {{ obra.sinopse }}</p>
            <p><strong>Classificação:</strong> {{ obra.classificacao }}</p>
            <p><strong>Etapa:</strong> {{ obra.etapa }}</p>
            <p><strong>Status:</strong> {{ obra.status }}</p>

            <h3>Estatísticas</h3>
            <ul class="list-group mb-4">
                <li class="list-group-item">
                    <i class="fas fa-thumbs-up"></i> <strong>Votos:</strong> {{ total_votos }}
                </li>
                <li class="list-group-item">
                    <i class="fas fa-comments"></i> <strong>Comentários:</strong> {{ total_comentarios }}
                </li>
                <li class="list-group-item">
                    <i class="fas fa-eye"></i> <strong>Visualizações:</strong> {{ obra.visualizacoes }}
                </li>
            </ul>

            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-success text-white">Capítulos Publicados</div>
                            <ul class="list-group">
                                {% for capitulo in capitulos_publicados %}
                                    <li class="list-group-item">
                                        <a href="{{ url_for('visualizacao_capitulo', capitulo_id=capitulo.id) }}">
                                            {{ capitulo.titulo }}
                                        </a>
                                        <p><strong>Data de Criação:</strong> {{ capitulo.data_criacao.strftime('%d/%m/%Y %H:%M') }}</p>
                                    </li>
                                {% else %}
                                    <li class="list-group-item">Não há capítulos ainda.</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
{% endblock %}
